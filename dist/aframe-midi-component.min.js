!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}(this,(function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerSystem("midi",{schema:{deviceName:{type:"string",default:""}},init:function(){this.midiOutput=null,this._initialized=!1,navigator.requestMIDIAccess({software:!0}).then(function(e){this._inputs=e.inputs,console.log("Found midi inputs:"),this._inputs.forEach((function(e){console.log(input)})),this._outputs=e.outputs,console.log("Found midi outputs:"),this._outputs.forEach((function(e){console.log(e)})),this._initialized=!0,this.update({})}.bind(this))},update:function(e){if(this._initialized&&this.data.deviceName!==e.deviceName){let e=!1;this._outputs.forEach(function(t){t.name===this.data.deviceName&&(this.midiOutput=t,e=!0,console.log("Using midi output: ",this.midiOutput))}.bind(this)),e||console.log("Could not find device: ",this.data.deviceName)}}}),AFRAME.registerComponent("midi",{multiple:!0,schema:{type:{type:"string",default:"message",oneOf:["message","noteOn","programChange"]},message:{type:"array",default:[144,60,127]},note:{type:"number",default:60},delay:{type:"number",default:100},on:{type:"string",default:"click"}},init:function(){},update:function(e){this.data.on!==e.on&&(console.log("Removing old listener on '",e.on,"' event"),this.el.removeEventListener(e.on,this._onEvent.bind(this)),console.log("Adding listener on '",this.data.on,"' event"),this.el.addEventListener(this.data.on,this._onEvent.bind(this)))},_onEvent:function(e){switch(this.data.type){case"message":this.system.midiOutput.send(this.data.message);break;default:console.log("Unknwn type: ",this.data.type)}}})}])}));